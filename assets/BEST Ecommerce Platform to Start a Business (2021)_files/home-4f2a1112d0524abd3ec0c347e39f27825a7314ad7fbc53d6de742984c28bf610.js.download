(self.webpackJsonp=self.webpackJsonp||[]).push([["manifests/home","application"],{"./app/javascript/application.js":function(t,e,i){"use strict";i.r(e);i("../caches/app/node_modules/@shopify/polyfills/base.esnext");var s=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js");window.App=window.App||{},window.ShopifyMarketing=window.ShopifyMarketing||{},App.config&&App.config.signupHost&&s.config.set("SignupBaseURI","https://"+App.config.signupHost),s.config.set("customGoogleAnalyticsNamespace","_other"),Object(s.init)();const n=document.getElementById("ShopifyMainNav");App.scrollTo=new s.ScrollTo({offset:n?-n.offsetHeight:0}),new s.StickyNav},"./app/javascript/components/interactive-map.js":function(t,e,i){"use strict";var s=i("../caches/app/node_modules/waypoints/src/entries/noframework.js"),n=i.n(s);e.a=class{constructor(t,e){this.waypointContainer=e,this.mapContainer=t}init(){this.mapContainer.classList.add("interactive-map-enabled"),this.bindWaypoint()}mapFallback(){this.mapContainer.classList.remove("interactive-map-enabled");const t=this.mapContainer.querySelector(".map__globe-wrapper");return t.parentElement.removeChild(t),"object"==typeof this.mapApp?this.mapApp.destroy():null}bindWaypoint(){const t=new n.a({element:this.waypointContainer,offset:"100%",handler:e=>{"down"===e&&(this.handleWaypointTriggered(),t.disable())}})}handleMapError(t="an error occured fetching map data"){window.bugsnagClient.notify(t),this.mapFallback()}onMapAppLoad({default:t}){this.pauseButton=this.mapContainer.querySelector(".map__control--pause"),this.playButton=this.mapContainer.querySelector(".map__control--play");const e=this.mapContainer.querySelector("#Map");this.mapApp=new t(e,e.dataset.start,this.handleMapError.bind(this)),this.mapContainer.classList.add("js-map-animation--active"),this.pauseButton.addEventListener("click",this.pause.bind(this)),this.playButton.addEventListener("click",this.play.bind(this))}pause(){this.mapApp.pause().then(()=>{this.mapContainer.classList.remove("js-map-animation--active"),this.playButton.focus()}).catch(t=>window.bugsnagClient.notify(t))}play(){this.mapApp.play().then(()=>{this.mapContainer.classList.add("js-map-animation--active"),this.pauseButton.focus()}).catch(t=>window.bugsnagClient.notify(t))}handleWaypointTriggered(){Promise.all([i.e("vendors~manifests/economic-impact~map-app/MapApp"),i.e("map-app/MapApp")]).then(i.bind(null,"./app/javascript/map-app/MapApp.js")).then(this.onMapAppLoad.bind(this)).catch(this.handleMapError.bind(this))}}},"./app/javascript/components/ui-illustrations.js":function(t,e,i){"use strict";var s=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js");class n{constructor(t){this.$elem=t,this._handleVisiblityChange=this._handleVisiblityChange.bind(this),this._contentIsVisible()?this._init():this.observer=this._observeVisibility(this.$elem,this._handleVisiblityChange)}_contentIsVisible(){return this.$elem.offsetHeight>0}_handleVisiblityChange(t){t&&(this.observer.disconnect(),this._init())}_elemWidth(){return this.$elem.offsetWidth}_init(){this.originalWidth=parseInt(getComputedStyle(this.$elem).width,10),this.$elem.style.width="100%",this.$scalingElem=this._createScalingElem(),this._nestContentInScalingContainer(),this._onResize=Object(s.throttle)(this._updateTransform.bind(this),100,!0),this._onImageLoad=Object(s.throttle)(this._onImageLoad.bind(this),500,!0),this._updateTransform(),this._registerImages(),window.addEventListener("resize",this._onResize)}_registerImages(){this.$elem.querySelectorAll("img").forEach(t=>{t.addEventListener("load",this._onImageLoad)})}_onImageLoad(){this._updatePlaceholderSize()}_nestContentInScalingContainer(){for(;this.$elem.hasChildNodes();)this.$scalingElem.appendChild(this.$elem.firstChild);this.$elem.append(this.$scalingElem),this.$elem.append(this._createPlaceholderElem())}_heightToWidthRatio(){return this.$scalingElem.offsetHeight/this.$scalingElem.offsetWidth*100}_createPlaceholderElem(){return this.$placeholderElem=document.createElement("div"),this.$placeholderElem.style.setProperty("height","0"),this._updatePlaceholderSize(),this.$placeholderElem}_createScalingElem(){const t=document.createElement("div");return t.style.setProperty("width",this.originalWidth+"px"),t.style.setProperty("position","absolute"),t.style.transformOrigin="0 0",t}_containerSizeAsPercentageOfBase(){return this._elemWidth()/this.originalWidth}_updatePlaceholderSize(){this.$placeholderElem.style.setProperty("padding-bottom",this._heightToWidthRatio()+"%")}_updateTransform(){const t=this._containerSizeAsPercentageOfBase();this.$scalingElem.style.setProperty("transform",`scale(${t})`)}_observeVisibility(t,e){const i={root:document.documentElement},s=new IntersectionObserver(t=>{t.forEach(t=>{e(t.intersectionRatio>0)})},i);return s.observe(t),s}}i.d(e,"a",(function(){return o}));const a="ui-illustration__component";class o{constructor(){this.illustrations=[],document.querySelectorAll("."+a).forEach(this.addIllustration.bind(this))}addIllustration(t){this.illustrations.push(t),this._initTextScale(t),t.classList.add(a+"--initialized")}_initTextScale(t){return new n(t)}}},"./app/javascript/manifests/home.js":function(t,e,i){"use strict";i.r(e);var s=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js"),n=i("./app/javascript/components/ui-illustrations.js"),a=i("./app/javascript/modules/wistia-modal/index.js"),o=i("./app/javascript/modules/transparent-nav.js"),r=i("./app/javascript/modules/intercept-survey.js"),d=i("./app/javascript/components/interactive-map.js");i("./app/javascript/application.js");function l(){const t=document.querySelector(".js-announcement");t&&new s.Announcement(t),Object(o.a)(document.querySelector(".homepage-hero")),document.querySelectorAll(".pillars-animation").forEach(t=>{new s.Video(t)}),document.querySelectorAll(".js-wistia-modal").forEach(t=>new a.a(t)),function(){const t=document.querySelector(".map-interactive"),e=document.querySelector(".map__container");new d.a(e,t).init()}(),document.querySelectorAll(".intercept-survey__container").forEach(t=>new r.a(t,"home"))}new n.a,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l()},"./app/javascript/modules/intercept-survey.js":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var s=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js");const n="js-is-hidden",a="intercept-survey__cta",o="intercept-survey__close-button";class r{constructor(t,e){this.audiencePercentAssignment=Math.floor(100*Math.random())+1,this.interceptDisplayedCookie=e+"_interceptSurveyDisplayed",!this._interceptCookieExists()&&this._withinAudiencePercent()&&(this.$el=t,this.$surveyButtonCta=this.$el.querySelector("."+a),this.$closeButton=this.$el.querySelector("."+o),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this._onClick=this._onClick.bind(this),this._init())}show(){this.$el.classList.remove(n)}hide(){this.$el.classList.add(n)}_init(){this.$surveyButtonCta.addEventListener("click",this._onClick),this.$closeButton.addEventListener("click",this._onClick),setTimeout(this.show,4e3)}_interceptCookieExists(){return s.cookieHelper.get(this.interceptDisplayedCookie)}_onClick(){this._setInterceptCookie(this.interceptDisplayedCookie),this.hide()}_setInterceptCookie(t){const e=new Date;e.setDate(e.getDate()+7),s.cookieHelper.set(t,"1",{expires:e.toGMTString()})}_withinAudiencePercent(){return this.audiencePercentAssignment<=50}}},"./app/javascript/modules/transparent-nav.js":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("../caches/app/node_modules/waypoints/src/entries/noframework.js"),n=i.n(s);function a(t){const e=document.querySelector(".marketing-nav");new n.a({element:t,offset:()=>-t.clientHeight+e.clientHeight,handler:t=>{"down"===t?e.classList.add("marketing-nav--solid"):e.classList.remove("marketing-nav--solid")}})}},"./app/javascript/modules/wistia-modal/container.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="wistia-modal">\n  <div class="wistia-modal__spinner"></div>\n  <div class="wistia-modal__embed-container">'+(null==(__t=embed)?"":__t)+"</div>\n</div>\n";return __p}},"./app/javascript/modules/wistia-modal/embed.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="'+(null==(__t=instanceId)?"":__t)+'" class="wistia-modal__embed wistia_embed wistia_async_'+(null==(__t=wistiaId)?"":__t)+'">&nbsp;</div>\n';return __p}},"./app/javascript/modules/wistia-modal/hidden-container.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="visuallyhidden" aria-hidden="true">'+(null==(__t=embed)?"":__t)+"</div>\n";return __p}},"./app/javascript/modules/wistia-modal/index.js":function(t,e,i){"use strict";var s=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js"),n=i("./app/javascript/modules/wistia-modal/container.ejs"),a=i.n(n),o=i("./app/javascript/modules/wistia-modal/embed.ejs"),r=i.n(o),d=i("./app/javascript/modules/wistia-modal/hidden-container.ejs"),l=i.n(d);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}window._wq=window._wq||[];e.a=class{constructor(...t){const{$trigger:e,wistiaId:i,wistiaOptions:n}=this._resolveArgs(...t);Object.assign(this,{$trigger:e,wistiaId:i,wistiaOptions:n}),this._instanceId=Object(s.uniqueId)(),this._videoIsReadyToPlay=!1,this._loadWistiaHasRun=!1,this._parser=new DOMParser,this._$container=this._generateContainer(),["_modalTemplate","_loadWistia","_onVideoEmbedded","_onVideoPlayed","_onModalOpened"].forEach(t=>{this[t]=this[t].bind(this)}),window._wq.push(this._wistiaConfig),this._modal=this._initiateModal()}get _wistiaLoaded(){return this._loadWistiaHasRun||void 0!==window.Wistia}get _wistiaConfig(){return{id:this._instanceId,options:p({autoPlay:!0,silentAutoPlay:!1},this.wistiaOptions),onEmbedded:this._onVideoEmbedded}}_resolveArgs(t,e,i={}){const s={};if(!(t instanceof HTMLElement))throw new Error("WistiaModal wasn't passed an HTMLElement");if(s.$trigger=t,s.wistiaOptions=i,"object"==typeof e?s.wistiaOptions=e:"string"==typeof e&&(s.wistiaId=e),!s.wistiaId&&s.$trigger.dataset.wistiaId&&(s.wistiaId=s.$trigger.dataset.wistiaId),!s.wistiaId)throw new Error("WistiaModal couldn't resolve to a Wistia ID");return s}_initiateModal(){const t=new s.Modal(this.$trigger,this._modalTemplate,{modalStyleModifierClasses:{container:"modal-container--wistia modal-container--lowlight",closeIcon:"icon-modules-close-white"}});return t.on("opened",this._onModalOpened),t}_modalTemplate(){return this._$container}_generateContainer(){const t=r()({instanceId:this._instanceId,wistiaId:this.wistiaId}),e=a()({embed:t});return this._htmlStringToElement(e)}_generateHiddenContainer(){const t=r()({instanceId:"hidden_"+this._instanceId,wistiaId:this.wistiaId}),e=l()({embed:t});return this._htmlStringToElement(e)}_htmlStringToElement(t){return this._parser.parseFromString(t,"text/html").body.firstChild}_onModalOpened(){this.video&&this.video.play(),this._wistiaLoaded||this._loadWistia()}_onVideoPlayed(){this._videoHasPlayed||(this._videoHasPlayed=!0,this._$container.classList.add("has-played"))}_onVideoEmbedded(t){this.video=t,this.video.bind("play",this._onVideoPlayed)}_loadWistia(){this._loadWistiaHasRun=!0,this._loadScript(`https://fast.wistia.com/embed/medias/${this.wistiaId}.jsonp`),this._loadScript("https://fast.wistia.com/assets/external/E-v1.js")}_loadScript(t){const e=document.createElement("script");e.type="text/javascript",document.body.appendChild(e),e.src=t}}}},[["./app/javascript/manifests/home.js","runtime","vendor"]]]);
//# sourceMappingURL=home-37651876b37bf6bb223dd303b4f544520afc6a7a634098c6784eebc991a3f868.js.map